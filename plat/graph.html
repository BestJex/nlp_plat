<!DOCTYPE html>
<html style="height: 100%">
   <head>
       <meta charset="utf-8">
      <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">  
       <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
      
       <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>

       <style>
        textarea{
                border: 1px solid #ccc;
                padding: 7px 0px;
                border-radius: 3px;
                padding-left:5px;
                -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075);
                box-shadow: inset 0 1px 1px rgba(0,0,0,.075);
                -webkit-transition: border-color ease-in-out .15s,-webkit-box-shadow ease-in-out .15s;
                -o-transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;
                transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;
                display:block;
                margin-left:auto;
                margin-right:auto;
            }
            textarea:focus{
                    border-color: #66afe9;
                    outline: 0;
                    -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6);
                    box-shadow: inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6)
            }
            .button_row{
                text-decoration:none;  
    background:#2f435e;  
    color:#f2f2f2;  
      
    padding: 10px 30px 10px 30px;  
    font-size:16px;  
    font-family: 微软雅黑,宋体,Arial,Helvetica,Verdana,sans-serif;  
    font-weight:bold;  
    border-radius:3px;  
      
    -webkit-transition:all linear 0.30s;  
    -moz-transition:all linear 0.30s;  
    transition:all linear 0.30s;  
    margin-left:auto;
                margin-right:auto;
            }
       </style>


   </head>
   <body style="height: 100%; margin: 0;background-color:#8A2BE2">

    <center><h2 class="h2deco" style="color:white;float: center ">知识图谱生产</h2></center>


    <div class="row" style="width: 1400px;float: left;">        
            <button type="button" class="btn btn-primary btn-lg" type="submit" onclick="buttonclick()">点击生成图谱</button>  
            <button type="button" class="btn btn-primary btn-lg" type="submit" onclick="example1()">实例1</button>
            <button type="button" class="btn btn-primary btn-lg" type="submit" onclick="example2()">实例2</button>
            <button type="button" class="btn btn-primary btn-lg" type="submit" onclick="example3()">实例3</button>
            <button type="button" class="btn btn-default btn-lg" type="submit" style="float:right"onclick="back()">返回主页</button>  
            <br><br>

    </div>


    <div style="width: 700px;height:600px;float: left;background-color:   white">
        <textarea id="a" style="width: 700px;height:600px;float: center;" placeholder="请输入文本"></textarea>       
    </div>

    <div style="width: 200px;height:200px;float: left;">
              
    </div>  

    <div  style="width: 600px;height:600px;float: left;background-color:   white">
    <div id="json" ></div>
    </div>



    <!-- <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/echarts.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-gl/echarts-gl.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-stat/ecStat.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/dataTool.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/china.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/world.js"></script>

    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/bmap.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/simplex.js"></script> -->

    <script src="static/bower_components/jquery/dist/jquery.min.js"></script>
<!-- Bootstrap 3.3.7 -->
<script src="static/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<!-- bootstrap color picker -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
       <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-gl/dist/echarts-gl.min.js"></script>
       <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-stat/dist/ecStat.min.js"></script>
       <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/extension/dataTool.min.js"></script>
       <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/map/js/china.js"></script>
       <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/map/js/world.js"></script>
       <!-- <script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=xfhhaTThl11qYVrqLZii6w8qE5ggnhrY&__ec_v__=20190126"></script> -->
       <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/extension/bmap.min.js"></script>



    <script>
        function buttonclick(){
            var text = $('#a').val();
            console.log(text);
            $.getJSON('http://39.100.48.36:3001/graph?sentence='+text,function(datas,status){
                console.log(status)
                console.log(datas)

                var dom = document.getElementById("chart");
                  var myChart = echarts.init(dom);
                 var app = {};
                option = null;
                var data = datas;

                console.log(typeof(data));


        option = {
    //   title: {
    //     text: '图谱如下',
    //     textAlign: 'right'
    //  },
   
    series: [{
        type: 'graph',
        layout: 'force',
        symbolSize: 58,
        roam: true,
        focusNodeAdjacency: true,
        tooltip: {
        formatter(x) {
            return x.data.des;
        }
     },
      legend: {
        x: 'center',
        data: ['一级关系', '二级关系', '三级关系']
     },
        edgeSymbol: ['', 'arrow'],
        // edgeSymbolSize: [80, 10],
        edgeLabel: {
            normal: {
                textStyle: {
                    fontSize: 20
                },
                show: true,
                formatter(x) {
                    return x.data.name;
                }
            }
        },
        force: {
            repulsion: 2000,
            edgeLength: 120
        },
        draggable: true,
        itemStyle: {
            normal: {
                color: '#4b565b'
            }
        },
        lineStyle: {
            normal: {
                width: 1,
                color: '#4b565b'

            }
        },
        label: {
            normal: {
                show: true,
                textStyle: {}
            }
        },
        data: data.antity,
        links: data.relation
    }]
}

if (option && typeof option === "object") {
    myChart.setOption(option, true);
}


            });
        }

        function example1(){
            var text = "针对经典Otsu算法、最大熵算法、最小交叉熵算法等在低信噪比图像中分割效果较差的问题,从图像复杂度的角度提出了基于图像背景与目标的对象复杂度的图像分割方法,并采用曲线拟合方法大大减少了计算冗余,提高了算法的实时性与稳定性";
            console.log(text);
            $('#a').text(text);
           
        
        }

         function example2(){
            var text = "针对传统图像拼接算法不适用于局部特征点多的微观图像实时拼接问题,结合Harris角点、SURF算法和KMeans算法提出了一种改进的算法";
            console.log(text);
            $('#a').text(text);
            /*$.getJSON('http://39.100.48.36:3000/predict_ner?sentence='+text,function(datas,status){
                console.log(status);
                console.log(datas);
                var data=JSON.stringify(datas);
                console.log(typeof(data));
                $('#json').text(data);

                
        });*/
        
        }

        function example3(){
            var text = "实验结果表明,基于BTPV模型的分布式表示较常见的分布式向量化模型word2vec和ParagraphVector来说能取得更好的短文本聚类效果,从而显现出该模型面向短文本分析的优势";
            console.log(text);
            $('#a').text(text);
        }
        function back(){
           window.location.href="index.html";     //在同当前窗口中打开窗口 
        }
       
    
    </script>



     
       
   </body>
</html>